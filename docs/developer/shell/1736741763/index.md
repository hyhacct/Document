---
title: "Shell"
titleTemplate: Shell脚本加密
---

# 概述

本文介绍将Shell脚本加密为二进制


## 准备工作

需要安装软件`shc`，并且本机需要有`gcc`环境


:::code-group

```bash [Ubuntu/Debian]
apt -y install gcc shc
```

```bash [CentOS]
yum -y install gcc shc
```

:::

## 执行加密

假设现在有一个脚本，位置在`/root/test.sh`

使用shc执行加密：

```bash
shc -v -f /root/test.sh
```

加密完成后会出现一个叫`test.sh.c`的文件，以及一个`test.sh.x`的二进制文件，给个x权限即可直接`./test.sh.x`执行他


## 命令参数

> [!IMPORTANT]
> 注意
> 
> `安全性`： shc 虽然可以加密 Shell 脚本，但并不是完全安全的。如果攻击者有足够的资源和技术，仍然可以对加密后的二进制文件进行逆向工程。
> 
> `兼容性`： shc 生成的二进制文件可能不兼容所有系统。如果需要在多个系统上运行，建议使用 -r 参数。
> 
> `性能`： 加密后的脚本执行效率可能会略低于原始脚本，但只是略微，几乎可以忽略不计。



| 参数              | 描述                                                                                           |
| ----------------- | :--------------------------------------------------------------------------------------------- |
| `-f, --file`      | 指定要加密的 Shell 脚本文件。这是必需的参数。                                                  |
| `-v, --verbose`   | 启用详细模式，输出更多的编译信息。这有助于调试和了解编译过程。                                 |
| `-r, --relaxed`   | 放宽安全限制，生成可在不同系统上执行的二进制文件。这对于需要在多个系统上运行相同的脚本很有用。 |
| `-T, --timestamp` | 设置脚本的过期时间。一旦达到过期时间，脚本将无法执行。                                         |
| `-x, --exclude`   | 排除某些文件或目录。这可以用于排除不需要加密的文件。                                           |
| `-h, --help`      | 显示帮助信息。                                                                                 |


示例：

```bash
# 加密脚本，并输出详细的信息
shc -v -f my_script.sh

# 加密脚本，并设置过期时间为30天
shc -v -T 30 -f my_script.sh

# 加密脚本，并生成可在不同系统上执行的二进制文件
shc -v -r -f my_script.sh
```